---
layout: base
---
<div class="body-container container-fluid" data-spy="scroll" data-target="#toc">

{% if page.title %}<h1 class="title">{{ page.title }}</h1><hr>{% endif %}

{% if page.blog == true %}
<p class="post-meta">
{% if page.date %}<time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%b %-d, %Y" }}</time>{% endif %}
{% if page.topic %}<span class="meta-sep">•</span><span>{{ page.topic }}</span>{% endif %}
{% if page.read_time %}<span class="meta-sep">•</span><span>{{ page.read_time }}</span>{% endif %}
{% if page.attribution %}<span class="meta-sep">•</span><span class="attribution">By {{ page.attribution }}</span>{% endif %}
</p>
{% elsif page.attribution %}
<p class="attribution">{{ page.attribution }}</p>
{% endif %}

{% if page contains "toc" and page.toc == true %}
    <div class="row">
        <div class="col-xs-12 col-md-10" id="content">{{ content }}</div>
        <div class="col-xs-hidden col-md-2"><nav class="fixed-top-right toc" id="toc"></nav></div>
    </div>

    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css">

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        if (!window.tocbot) return;

        tocbot.init({
          // Where to render the table of contents.
          tocSelector: '#toc',
          // Where to grab the headings to build the table of contents.
          contentSelector: '#content',
          // Which headings to grab inside of the contentSelector element.
          headingSelector: 'h2, h3, h4',
          collapseDepth: 3,
        });
      });
    </script>

{% else %}

<div id="content">{{ content }}</div>

{% endif %}

{% if page.blog == true %}
{% assign all_blog_pages = site.pages | where: "blog", true | sort: "date" | reverse %}
{% assign related_by_topic = all_blog_pages | where: "topic", page.topic | where_exp: "post", "post.url != page.url" %}
{% assign related_pages = related_by_topic %}
{% if related_pages.size == 0 %}
{% assign related_pages = all_blog_pages | where_exp: "post", "post.url != page.url" %}
{% endif %}

{% if related_pages.size > 0 %}
<section class="related-blogs" aria-label="Related blog posts">
  <h2 class="related-blogs-title">Related Blogs</h2>
  <ul class="related-blogs-list">
    {% for post in related_pages %}
    <li class="related-blogs-item">
      <div class="related-blogs-line">
        <a class="related-blogs-link" href="{{ post.url | relative_url }}">{{ post.title }}</a>{% if post.summary %}<span class="related-blogs-snippet"> — {{ post.summary | strip_html }}</span>{% endif %}{% if post.date or post.read_time %}<span class="home-meta-sep">•</span><span class="related-blogs-stats">{% if post.date %}{{ post.date | date: "%b %-d, %Y" }}{% endif %}{% if post.date and post.read_time %}<span class="home-meta-sep">•</span>{% endif %}{% if post.read_time %}{{ post.read_time }}{% endif %}</span>{% endif %}
      </div>
    </li>
    {% endfor %}
  </ul>
</section>
{% endif %}
{% endif %}

</div>

<style>
  p.post-meta {
    color: #b8c2d0;
    font-size: 80%;
    font-style: italic;
    text-transform: none;
    letter-spacing: 0.6px;
    margin-top: -8px;
    margin-bottom: 14px;
    text-align: right;
  }

  .meta-sep {
    margin: 0 8px;
  }

    p.attribution {
        font-style: italic;
        font-size: 80%;
        text-align: right;
    }

    /* Inline attribution inside .post-meta (for blog posts) */
    /* Inline attribution handled by .post-meta above; keep p.attribution for non-blog pages */

    .body-container {
      margin: 0 auto;
      max-width: 860px;
      width: 100%;
      padding: 1rem 30px 0;
    }

    @media screen and (max-width: 600px) {
      .body-container {
        padding-left: 12px;
        padding-right: 12px;
      }
    }
    a.toc-link {
      color: #aaa !important;
      font-size: 90%;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
    }
    .fixed-top-right {
        position: fixed;
        margin-top: 0;
        margin-left: 0;
    }
    .is-active-link::before {
        background-color: #7ab0ff !important;
    }
</style>

